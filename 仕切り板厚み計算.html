<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ä»•åˆ‡ã‚Šæ¿ åšã¿ã‚«ãƒªã‚­ãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆã‹ã‚ã„ã„ç‰ˆï¼‰</title>
<style>
  :root{
    --bg:#0b1018; --card:#121a26; --ink:#eaf3ff;
    --sub:#b9c7db; --acc:#ffd54f; --blue:#8ecbff; --pink:#ff9ad9; --mint:#98ffcc;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh; color:var(--ink); background:
      radial-gradient(1200px 800px at 70% -10%, #101a2a 0%, var(--bg) 60%),
      radial-gradient(1200px 800px at -10% 120%, #0b1420 0%, var(--bg) 60%);
    font-family: "Segoe UI", "Hiragino Kaku Gothic ProN", "Meiryo", system-ui, sans-serif;
  }
  header{
    padding:24px 16px 8px; text-align:center;
  }
  h1{ margin:0; font-size:28px; color:var(--acc); letter-spacing:.02em }
  p.lead{ margin:.4em 0 0; color:var(--sub) }
  .wrap{
    max-width:980px; margin:16px auto 32px; padding:16px;
    display:grid; gap:16px; grid-template-columns: 1.1fr .9fr;
  }
  @media (max-width:900px){ .wrap{ grid-template-columns: 1fr; } }
  .card{
    background:linear-gradient(180deg, var(--card), #0f1622);
    border:1px solid rgba(255,255,255,.06);
    border-radius:16px; padding:18px;
    box-shadow:0 10px 30px rgba(0,0,0,.35);
  }
  .card h2{ margin:0 0 10px; font-size:18px; color:var(--blue) }
  .row{ display:grid; grid-template-columns:1fr 1fr; gap:10px; margin:10px 0 }
  label{ font-size:13px; color:#cfe0ff }
  input, select{
    width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.08);
    background:#0c1520; color:var(--ink); outline:none; font-size:16px;
  }
  .units{ color:#9db3cc; font-size:12px; margin-left:6px }
  .radio{ display:flex; gap:12px; flex-wrap:wrap; margin-top:6px }
  .chip{
    display:inline-flex; align-items:center; gap:8px;
    padding:8px 10px; border:1px solid rgba(255,255,255,.12);
    border-radius:999px; cursor:pointer; user-select:none;
    background:#0d1826;
  }
  .chip input{ accent-color:#ffd54f }
  .result{
    display:flex; flex-direction:column; gap:10px; margin-top:6px;
    font-family: ui-monospace, "SFMono-Regular", Menlo, Consolas, monospace;
  }
  .big{
    font-size:32px; color:var(--mint); text-shadow:0 0 16px rgba(152,255,204,.3);
  }
  .badge{
    display:inline-block; padding:2px 8px; border-radius:999px;
    background:#122235; color:#b7d4ff; font-size:12px; border:1px solid rgba(255,255,255,.08);
  }
  .btns{ display:flex; gap:8px; flex-wrap:wrap; margin-top:12px }
  button{
    padding:10px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.12);
    background:#132235; color:var(--ink); cursor:pointer; font-weight:600;
  }
  button:hover{ background:#182c49 }
  details{
    margin-top:10px; color:#c7d6ef
  }
  code{ background:#0e1928; padding:2px 6px; border-radius:6px; }
  footer{
    max-width:980px; margin:8px auto 40px; padding:0 16px; color:#9bb1cc; font-size:12px;
  }
  .hint{ color:#9bb1cc; font-size:12px }
</style>
</head>
<body>
<header>
  <h1>ğŸ› ï¸ ä»•åˆ‡ã‚Šæ¿ åšã¿ã‚«ãƒªã‚­ãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ <span class="badge">å‚è€ƒç”¨</span></h1>
  <p class="lead">é…ç®¡è€åœ§è©¦é¨“ã®ã€Œãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰ï¼ˆä»•åˆ‡ã‚Šæ¿ï¼‰ã€ã®æ¿åšã‚’ã€è–„æ¿å††æ¿ç†è«–ã§ã–ã£ãã‚Šè©¦ç®—ã—ã¾ã™ã€‚<br>è¦æ ¼ï¼ˆASME B16.48 / JIS ãªã©ï¼‰ã®è¡¨å€¤ã‚„è¨­è¨ˆå¯©æŸ»ã®ä»£ã‚ã‚Šã«ã¯ãªã‚‰ãªã„ç‚¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p>
</header>

<div class="wrap">
  <div class="card">
    <h2>å…¥åŠ› ğŸ§®</h2>
    <div class="row">
      <div>
        <label>è©¦é¨“åœ§åŠ› P <span class="units">[MPa = N/mmÂ²]</span></label>
        <input id="P" type="number" step="0.01" value="1.50">
      </div>
      <div>
        <label>æœ‰åŠ¹å¾„ D<sub>e</sub>ï¼ˆã‚¬ã‚¹ã‚±ãƒƒãƒˆç·šé–“ã®å®ŸåŠ¹ç›´å¾„ï¼‰<span class="units">[mm]</span></label>
        <input id="De" type="number" step="1" value="150">
      </div>
    </div>
    <div class="row">
      <div>
        <label>è¨±å®¹å¿œåŠ› S<sub>a</sub>ï¼ˆè©¦é¨“æ™‚ã®è¨±å®¹ï¼‰<span class="units">[MPa]</span></label>
        <input id="Sa" type="number" step="1" value="120">
      </div>
      <div>
        <label>ãƒã‚¢ã‚½ãƒ³æ¯” Î½ <span class="units">[-]</span></label>
        <input id="nu" type="number" step="0.01" value="0.30">
      </div>
    </div>

    <label>ç¸æ¡ä»¶ï¼ˆå††æ¿ã®å›ºå®šåº¦ï¼‰</label>
    <div class="radio">
      <label class="chip"><input type="radio" name="edge" value="clamped" checked> å›ºå®šç«¯ï¼ˆã‚¯ãƒ©ãƒ³ãƒ—ï¼šãƒœãƒ«ãƒˆç¾¤ã§ãŒã£ã¡ã‚Šå›ºå®šï¼‰</label>
      <label class="chip"><input type="radio" name="edge" value="simply"> å˜ç´”æ”¯æŒï¼ˆå‘¨ç¸ãŒè¼‰ã£ã¦ã„ã‚‹ã ã‘ï¼‰</label>
    </div>

    <div class="row">
      <div>
        <label>å®‰å…¨ç‡ Î³ <span class="units">[-]</span></label>
        <input id="gamma" type="number" step="0.05" value="1.25">
      </div>
      <div>
        <label>æœ€å°æ¿åšã®ä¸¸ã‚ <span class="units">[mmåˆ»ã¿]</span></label>
        <select id="roundStep">
          <option value="0.1">0.1</option>
          <option value="0.5" selected>0.5</option>
          <option value="1">1</option>
          <option value="2">2</option>
        </select>
      </div>
    </div>

    <div class="btns">
      <button id="btnCalc">è¨ˆç®—ã™ã‚‹</button>
      <button id="btnReset">ãƒªã‚»ãƒƒãƒˆ</button>
      <button id="btnPrint">PDFã«ä¿å­˜ï¼ˆå°åˆ·ï¼‰</button>
    </div>

    <details>
      <summary>ä½¿ã„æ–¹ã¨æ³¨æ„äº‹é …</summary>
      <ul>
        <li>æœ‰åŠ¹å¾„ D<sub>e</sub> ã¯<strong>ã‚¬ã‚¹ã‚±ãƒƒãƒˆååŠ›ç·šï¼ˆç·šåº§æ¨™ï¼‰é–“ã®å†…å¾„</strong>ã‚’æƒ³å®šã—ã¾ã™ã€‚è¿·ã†å ´åˆã¯ã‚¬ã‚¹ã‚±ãƒƒãƒˆå†…å¾„ã‚’ä¿å®ˆçš„ã«æ¡ç”¨ã€‚</li>
        <li>è¨±å®¹å¿œåŠ› S<sub>a</sub> ã¯è©¦é¨“æ¸©åº¦ã§ã®ææ–™è¨±å®¹ã€‚STPA25ãªã©ã¯ãƒ¡ãƒ¼ã‚«ãƒ¼è³‡æ–™/è¦æ ¼ã®å€¤ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚</li>
        <li>ã“ã®å¼ã¯è–„æ¿å††æ¿ã®<strong>æ›²ã’å¿œåŠ›ä¸»å°</strong>ã®ç°¡æ˜“å¼ã§ã€ãŸã‚ã¿ãƒ»ã‚¬ã‚¹ã‚±ãƒƒãƒˆåº§å±ˆãƒ»åº§å±ˆ/åº§é‡‘ãƒ»è£œå¼·ãƒ‘ãƒƒãƒ‰ç­‰ã¯æœªè€ƒæ…®ã§ã™ã€‚</li>
        <li>æœ€çµ‚è¨­è¨ˆã¯å¿…ãšç¾è¡Œè¦æ ¼ï¼ˆASME / JIS / ç¤¾å†…åŸºæº–ï¼‰ã¨å®Ÿæ©Ÿæ¡ä»¶ã§ç¢ºèªã—ã¦ãã ã•ã„ã€‚</li>
      </ul>
    </details>
  </div>

  <div class="card">
    <h2>çµæœ âœ¨</h2>
    <div class="result">
      <div>ç®—å®šå¼ï¼š<code>t = a Â· âˆš( C Â· P / S<sub>a</sub> ) Â· Î³</code></div>
      <div class="hint">ã“ã“ã§ <code>a = D<sub>e</sub>/2</code>ï¼ˆæœ‰åŠ¹åŠå¾„ï¼‰ï¼Œ<code>C</code> ã¯ç¸æ¡ä»¶ä¿‚æ•°</div>
      <div id="coef" class="hint">Cï¼ˆå›ºå®šç«¯ï¼‰= 3(1+Î½)/8</div>
      <div class="big"><span id="tmin">â€“</span> <span class="units">mmï¼ˆä¸¸ã‚å¾Œï¼‰</span></div>
      <div>ç†è«–æœ€å°ï¼š<span id="tlin">â€“</span> mmï¼ˆä¸¸ã‚å‰ï¼‰</div>
      <div>å…¥åŠ›ã®è¦ç´„ï¼šP=<span id="oP"></span> MPa, D<sub>e</sub>=<span id="oDe"></span> mm, S<sub>a</sub>=<span id="oSa"></span> MPa, Î½=<span id="onu"></span></div>
    </div>

    <details>
      <summary>å¼ã®ç”±æ¥ï¼ˆè–„æ¿å††æ¿ã®æœ€å¤§æ›²ã’å¿œåŠ›ï¼‰</summary>
      <p>ä¸€æ§˜åœ§åŠ› <code>P</code> ã‚’å—ã‘ã‚‹åŠå¾„ <code>a</code> ã®è–„æ¿å††æ¿ã§ã€</p>
      <ul>
        <li><strong>å›ºå®šç«¯ï¼ˆclampedï¼‰</strong>ï¼š<code>Ïƒ<sub>max</sub> = [3(1+Î½)/8] Â· (P aÂ² / tÂ²)</code></li>
        <li><strong>å˜ç´”æ”¯æŒï¼ˆsimply supportedï¼‰</strong>ï¼š<code>Ïƒ<sub>max</sub> = [(3+Î½)/8] Â· (P aÂ² / tÂ²)</code></li>
      </ul>
      <p>è¨±å®¹å¿œåŠ› <code>S<sub>a</sub></code> ã«å¯¾ã—ã¦ <code>Ïƒ<sub>max</sub> â‰¤ S<sub>a</sub></code> ã‚’æº€ãŸã™æœ€å°æ¿åš <code>t</code> ã‚’è§£ãã¨ã€
      <code>t = a Â· âˆš(CÂ·P/S<sub>a</sub>)</code>ã€‚å®‰å…¨ç‡ <code>Î³</code> ã‚’æ›ã‘ã¦è¨­è¨ˆä½™è£•ã‚’è¦‹è¾¼ã¿ã¾ã™ã€‚</p>
      <p class="hint">ã“ã®è¿‘ä¼¼ã¯ä¸€æ¬¡è¨­è¨ˆã®ç›®å®‰ã§ã™ã€‚è¦æ ¼ã®ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰åšï¼ˆASME B16.48 ãªã©ï¼‰ã‚„åº§å±ˆãƒ»ãŸã‚ã¿åˆ¶é™ã€è£œå¼·ãƒªãƒ³ã‚°ã®æœ‰ç„¡ã€
      ã‚¬ã‚¹ã‚±ãƒƒãƒˆåº§é¢ã®å‰›æ€§ãªã©ã¯åˆ¥é€”æ¤œè¨ãŒå¿…è¦ã§ã™ã€‚</p>
    </details>
  </div>
</div>

<footer>
  å‚è€ƒç”¨ãƒ„ãƒ¼ãƒ«ï¼šè¨­è¨ˆãƒ»å®‰å…¨å¯©æŸ»ã®ä»£æ›¿ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æœ€çµ‚åˆ¤æ–­ã¯ç¾è¡Œã®è¦æ ¼ãƒ»ç¤¾å†…åŸºæº–ãƒ»å®Ÿæ©Ÿæ¡ä»¶ã«åŸºã¥ãå®Ÿæ–½ã—ã¦ãã ã•ã„ã€‚
</footer>

<script>
const P = document.getElementById('P');
const De = document.getElementById('De');
const Sa = document.getElementById('Sa');
const nu = document.getElementById('nu');
const gamma = document.getElementById('gamma');
const roundStep = document.getElementById('roundStep');
const coef = document.getElementById('coef');
const tmin = document.getElementById('tmin');
const tlin = document.getElementById('tlin');
const oP = document.getElementById('oP');
const oDe = document.getElementById('oDe');
const oSa = document.getElementById('oSa');
const onu = document.getElementById('onu');

function edgeC(){
  const edge = document.querySelector('input[name="edge"]:checked').value;
  const v = parseFloat(nu.value||0.3);
  if(edge==='clamped'){
    coef.textContent = `Cï¼ˆå›ºå®šç«¯ï¼‰= 3(1+Î½)/8 = ${(3*(1+v)/8).toFixed(3)}`;
    return 3*(1+v)/8;
  }else{
    coef.textContent = `Cï¼ˆå˜ç´”æ”¯æŒï¼‰= (3+Î½)/8 = ${((3+v)/8).toFixed(3)}`;
    return (3+v)/8;
  }
}

function roundTo(value, step){
  const s = parseFloat(step||"0.5");
  return Math.ceil(value / s) * s;
}

function calc(){
  const p = Math.max(0, parseFloat(P.value||0));
  const de = Math.max(1e-6, parseFloat(De.value||0));
  const sa = Math.max(1e-6, parseFloat(Sa.value||0));
  const g  = Math.max(1, parseFloat(gamma.value||1));
  const a  = de/2.0;
  const C  = edgeC();
  const t_th = a * Math.sqrt(C * p / sa); // mm
  const t_design = t_th * g;
  const t_round = roundTo(t_design, roundStep.value);

  tlin.textContent = t_design.toFixed(2);
  tmin.textContent = t_round.toFixed(2);
  oP.textContent = p.toFixed(2);
  oDe.textContent = de.toFixed(0);
  oSa.textContent = sa.toFixed(0);
  onu.textContent = (parseFloat(nu.value||0.3)).toFixed(2);
}

document.getElementById('btnCalc').onclick = calc;
document.getElementById('btnReset').onclick = ()=>{
  P.value = 1.50; De.value = 150; Sa.value = 120; nu.value = 0.30; gamma.value = 1.25; roundStep.value = "0.5";
  document.querySelector('input[name="edge"][value="clamped"]').checked = true;
  calc();
};
document.getElementById('btnPrint').onclick = ()=>window.print();
document.querySelectorAll('input[name="edge"]').forEach(el=>el.addEventListener('change', calc));
[P,De,Sa,nu,gamma,roundStep].forEach(el=>el.addEventListener('input', calc));

calc();
</script>
</body>
</html>
